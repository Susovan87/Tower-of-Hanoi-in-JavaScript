//Copyright 2012, etc.

/**
 * almond 0.1.2 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){typeof define=="function"&&define.amd?define(["jquery","underscore"],t):e.toh=t(e.$,e._)})(this,function(e,t){var n,r,s;return function(e){function c(e,t){var n=t&&t.split("/"),r=o.map,i=r&&r["*"]||{},s,u,a,f,l,c,h,p,d,v;if(e&&e.charAt(0)==="."&&t){n=n.slice(0,n.length-1),e=n.concat(e.split("/"));for(p=0;v=e[p];p++)if(v===".")e.splice(p,1),p-=1;else if(v===".."){if(p===1&&(e[2]===".."||e[0]===".."))return!0;p>0&&(e.splice(p-1,2),p-=2)}e=e.join("/")}if((n||i)&&r){s=e.split("/");for(p=s.length;p>0;p-=1){u=s.slice(0,p).join("/");if(n)for(d=n.length;d>0;d-=1){a=r[n.slice(0,d).join("/")];if(a){a=a[u];if(a){f=a,l=p;break}}}if(f)break;!c&&i&&i[u]&&(c=i[u],h=p)}!f&&c&&(f=c,l=h),f&&(s.splice(0,l,f),e=s.join("/"))}return e}function h(t,n){return function(){return l.apply(e,a.call(arguments,0).concat([t,n]))}}function p(e){return function(t){return c(t,e)}}function d(e){return function(n){t[e]=n}}function v(n){if(i.hasOwnProperty(n)){var r=i[n];delete i[n],u[n]=!0,f.apply(e,r)}if(!t.hasOwnProperty(n))throw new Error("No "+n);return t[n]}function m(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=c(e.slice(0,i),t),e=e.slice(i+1),r=v(n),r&&r.normalize?e=r.normalize(e,p(t)):e=c(e,t)):e=c(e,t),{f:n?n+"!"+e:e,n:e,p:r}}function g(e){return function(){return o&&o.config&&o.config[e]||{}}}var t={},i={},o={},u={},a=[].slice,f,l;f=function(n,r,s,o){var a=[],f,l,c,p,y,b;o=o||n;if(typeof s=="function"){r=!r.length&&s.length?["require","exports","module"]:r;for(b=0;b<r.length;b++){y=m(r[b],o),c=y.f;if(c==="require")a[b]=h(n);else if(c==="exports")a[b]=t[n]={},f=!0;else if(c==="module")l=a[b]={id:n,uri:"",exports:t[n],config:g(n)};else if(t.hasOwnProperty(c)||i.hasOwnProperty(c))a[b]=v(c);else if(y.p)y.p.load(y.n,h(o,!0),d(c),{}),a[b]=t[c];else if(!u[c])throw new Error(n+" missing "+c)}p=s.apply(t[n],a);if(n)if(l&&l.exports!==e&&l.exports!==t[n])t[n]=l.exports;else if(p!==e||!f)t[n]=p}else n&&(t[n]=s)},n=r=l=function(t,n,r,i){return typeof t=="string"?v(m(t,n).f):(t.splice||(o=t,n.splice?(t=n,n=r,r=null):t=e),n=n||function(){},i?f(e,t,n,r):setTimeout(function(){f(e,t,n,r)},15),l)},l.config=function(e){return o=e,l},s=function(e,t,n){t.splice||(n=t,t=[]),i[e]=[e,t,n]},s.amd={jQuery:!0}}(),s("../tools/almond",function(){}),s("tower-of-hanoi/convert",["underscore"],function(e){function t(t){return e.escape(t)}return t}),s("tower-of-hanoi/toh-core",[],function(){var e=function(t,n,r,i){if(t==0)return;e.call(this,t-1,n,i,r),this.moveList.push([n,r]),e.call(this,t-1,i,r,n)};return function(t,n,r,i){if(!t)throw"number of disk must be provided.";n=n||0,r=r||2,i=i||1,this.moveList=[],this.solve=function(){return e.call(this,t,n,r,i),this.moveList}}}),s("tower-of-hanoi/toh-ui",["jquery"],function(e){var t=200,n=20,r=300,s=10,o=function(e){this.id=e,this.disks=[]};o.prototype.add=function(e){this.disks.push(e)},o.prototype.remove=function(){return this.disks.pop()},o.prototype.render=function(){var t=document.createElement("div");return t.setAttribute("id","spike-"+this.id),t.setAttribute("class","spike"),this.$el=e(t),this};var u=function(e){this.color=e.color||"lightblue",this.width=e.width||200,this.text=e.text||"",this.left=0,this.right=0};u.prototype.render=function(){var t=document.createElement("div");return t.setAttribute("class","disk"),this.$el=e(t),this.$el.text(this.text).width(this.width).css("background-color",this.color).css({top:this.top,left:this.left}),this},u.prototype.applyStyle=function(){this.$el[0].innerHTML=this.text,e(this).css({top:this.top,left:this.left}),e(this).css("background-color",this.color).width(this.width)},u.prototype.put=function(e){this.top=r-(e.disks.length+1)*n,this.left=155*(e.id*2+1)-this.width/2,e.add(this),this.$el&&this.$el.css({top:this.top,left:this.left})},u.prototype.move=function(e,t){this.top=r-(e.disks.length+1)*n,this.left=155*(e.id*2+1)-this.width/2,e.add(this),this.$el.animate({top:"75px"},"slow").animate({left:this.left+"px"},"slow").animate({top:this.top+"px"},"slow",t)};var a=[],f=function(e,t,n){a[e].remove().move(a[t],n)};return{render:function(t){e("body").append('<div class="hanoi-container"></div>'),a=[new o(0),new o(1),new o(2)],e(".hanoi-container").append(a[0].render().$el).append(a[1].render().$el).append(a[2].render().$el);var n=[];for(i=0;i<t.length;i++){var r=new u(t[i]);r.put(a[0]),e(".hanoi-container").append(r.render().$el),n.push(r)}},move:f.bind(this),moves:function(e,t){var n=function(){var r=e.shift();r?f.call(this,r[0],r[1],n):t&&t()};n()}}}),s("tower-of-hanoi/main",["underscore","jquery","./toh-core","./toh-ui"],function(e,t,n,r){t(function(){var e=new n(6);r.render([{color:"#CC3300",width:290,text:"to live"},{color:"#CC9933",width:260,text:"to satisfy"},{color:"#CC6633",width:230,text:"to overcome"},{color:"#999933",width:200,text:"to create"},{color:"#9966FF",width:170,text:"to learn"},{color:"#00CCFF",width:140,text:"Born"}]);var t=e.solve();r.moves(t)})}),s("tower-of-hanoi",["require","jquery","tower-of-hanoi/convert","tower-of-hanoi/toh-core","tower-of-hanoi/toh-ui","tower-of-hanoi/main"],function(e){var t=e("jquery"),n=e("tower-of-hanoi/convert"),r=e("tower-of-hanoi/toh-core"),i=e("tower-of-hanoi/toh-ui"),s=e("tower-of-hanoi/main");return{version:"0.0.1, jQuery version is: "+t.fn.jquery,convert:n,main:s}}),s("jquery",function(){return e}),s("underscore",function(){return t}),r("tower-of-hanoi")});